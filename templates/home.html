<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heart Health Check</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #fff5f5 0%, #ffe8e8 50%, #ffe0e0 100%);
            min-height: 100vh;
        }
        
        /* Navigation Bar */
        .navbar {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .nav-logo {
            font-size: 1.5em;
            color: #d32f2f;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .nav-links {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .nav-link {
            padding: 10px 20px;
            text-decoration: none;
            color: #666;
            border-radius: 20px;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .nav-link:hover {
            background: #ffe0e0;
            color: #d32f2f;
        }
        
        .nav-link.active {
            background: #d32f2f;
            color: white;
        }
        
        /* Heartbeat Animation */
        .heartbeat-container {
            text-align: center;
            padding: 40px 20px;
            margin: 20px 0;
        }
        
        .heartbeat-line {
            display: inline-block;
            font-size: 40px;
            color: #d32f2f;
            animation: heartbeat 1.5s ease-in-out infinite;
        }
        
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.2); }
            50% { transform: scale(1); }
            75% { transform: scale(1.1); }
        }
        
        .heartbeat-wave {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-top: 20px;
            font-size: 30px;
            color: #ff6b6b;
        }
        
        .wave-bar {
            width: 8px;
            background: linear-gradient(180deg, #ff6b6b 0%, #d32f2f 100%);
            border-radius: 4px;
            animation: wave 1.4s ease-in-out infinite;
        }
        
        .wave-bar:nth-child(1) { animation-delay: 0s; height: 30px; }
        .wave-bar:nth-child(2) { animation-delay: 0.1s; height: 50px; }
        .wave-bar:nth-child(3) { animation-delay: 0.2s; height: 70px; }
        .wave-bar:nth-child(4) { animation-delay: 0.3s; height: 50px; }
        .wave-bar:nth-child(5) { animation-delay: 0.4s; height: 30px; }
        .wave-bar:nth-child(6) { animation-delay: 0.5s; height: 50px; }
        .wave-bar:nth-child(7) { animation-delay: 0.6s; height: 70px; }
        .wave-bar:nth-child(8) { animation-delay: 0.7s; height: 50px; }
        .wave-bar:nth-child(9) { animation-delay: 0.8s; height: 30px; }
        
        @keyframes wave {
            0%, 100% { transform: scaleY(0.5); }
            50% { transform: scaleY(1); }
        }
        
        /* Hero Section */
        .hero {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            text-align: center;
        }
        
        .hero h1 {
            color: #d32f2f;
            font-size: 3em;
            margin-bottom: 20px;
        }
        
        .hero p {
            color: #666;
            font-size: 1.2em;
            margin-bottom: 40px;
            line-height: 1.6;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #d32f2f 0%, #b71c1c 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 30px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(211,47,47,0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(211,47,47,0.4);
        }
        
        /* Content Sections */
        .content-section {
            max-width: 1200px;
            margin: 40px auto;
            padding: 40px 20px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        }
        
        .section-title {
            color: #d32f2f;
            font-size: 2em;
            margin-bottom: 25px;
            text-align: center;
        }
        
        /* Disclaimer Section */
        .disclaimer-box {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 25px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .disclaimer-box h3 {
            color: #e65100;
            margin-bottom: 15px;
        }
        
        .disclaimer-box p {
            color: #5d4037;
            line-height: 1.8;
        }
        
        /* Model Details */
        .model-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .detail-card {
            background: linear-gradient(135deg, #ffe0e0 0%, #ffcccc 100%);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .detail-card h4 {
            color: #d32f2f;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .detail-card p {
            color: #666;
            font-size: 0.95em;
            line-height: 1.6;
        }
        
        /* Prediction Form */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 30px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            color: #424242;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-group input {
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #d32f2f;
        }
        
        .form-group .help {
            font-size: 0.85em;
            color: #757575;
            margin-top: 5px;
        }
        
        .result {
            margin-top: 30px;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            display: none;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .result.success {
            background: #e8f5e9;
            border: 2px solid #4caf50;
            color: #2e7d32;
        }
        
        .result.danger {
            background: #ffebee;
            border: 2px solid #ef5350;
            color: #c62828;
        }
        
        .result h3 {
            font-size: 1.5em;
            margin-bottom: 15px;
        }
        
        /* Hidden sections */
        .hidden {
            display: none;
        }
        
        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .hero h1 {
                font-size: 2em;
            }
            
            .nav-links {
                flex-direction: column;
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <span>‚ù§Ô∏è</span> Heart Health Check
            </div>
            <div class="nav-links">
                <a href="#home" class="nav-link active" onclick="showSection('home', this)">Home</a>
                <a href="#predict" class="nav-link" onclick="showSection('predict', this)">Predict Now</a>
                <a href="#graphs" class="nav-link" onclick="showSection('graphs', this)">Graphs</a>
                <a href="#model" class="nav-link" onclick="showSection('model', this)">Model Details</a>
                <a href="#disclaimer" class="nav-link" onclick="showSection('disclaimer', this)">Disclaimer</a>
            </div>
        </div>
    </nav>
    
    <!-- Home Section -->
    <section id="home" class="content-section">
        <div class="hero">
            <div class="heartbeat-container">
                <div class="heartbeat-line">‚ù§Ô∏è</div>
                <div class="heartbeat-wave">
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                </div>
            </div>
            <h1>Welcome to Heart Health Check</h1>
            <p>An AI-powered tool to assess your cardiovascular health risk</p>
            <a href="#predict" class="btn-primary" onclick="event.preventDefault(); showSection('predict'); return false;">üîÆ Get Your Prediction</a>
        </div>
    </section>
    
    <!-- Prediction Section -->
    <section id="predict" class="content-section hidden">
        <h2 class="section-title">üîÆ Make a Prediction</h2>
        <p style="text-align: center; color: #666; margin-bottom: 30px;">
            Fill in your health information below to get an AI-powered assessment
        </p>
        
        <div style="background: #fff3e0; padding: 20px; border-radius: 10px; margin-bottom: 30px;">
            <h3 style="color: #e65100; margin-bottom: 15px;">üìã Quick Guide</h3>
            <ul style="color: #5d4037; line-height: 2; padding-left: 20px;">
                <li><strong>Gender:</strong> 0 = Female, 1 = Male</li>
                <li><strong>Blood Pressure:</strong> Enter your recent BP readings</li>
                <li><strong>Cholesterol/Glucose:</strong> 1 = Normal, 2 = Above Normal, 3 = High</li>
                <li><strong>Lifestyle:</strong> 0 = No, 1 = Yes (for smoking, alcohol, exercise)</li>
            </ul>
        </div>
        
        <form id="predictionForm">
            <div class="form-grid">
                <div class="form-group">
                    <label>Gender</label>
                    <input type="number" name="gender" min="0" max="1" placeholder="0 or 1" required>
                    <span class="help">0 = Female, 1 = Male</span>
                </div>
                
                <div class="form-group">
                    <label>Height (cm)</label>
                    <input type="number" name="height" min="100" max="250" placeholder="e.g., 170" required>
                    <span class="help">Your height in centimeters</span>
                </div>
                
                <div class="form-group">
                    <label>Weight (kg)</label>
                    <input type="number" name="weight" min="30" max="200" step="0.1" placeholder="e.g., 70" required>
                    <span class="help">Your weight in kilograms</span>
                </div>
                
                <div class="form-group">
                    <label>Age (years)</label>
                    <input type="number" name="age_year" min="25" max="100" placeholder="e.g., 45" required>
                    <span class="help">Your age</span>
                </div>
                
                <div class="form-group">
                    <label>Systolic BP (upper)</label>
                    <input type="number" name="ap_hi" min="70" max="250" placeholder="e.g., 120" required>
                    <span class="help">Top number in BP reading</span>
                </div>
                
                <div class="form-group">
                    <label>Diastolic BP (lower)</label>
                    <input type="number" name="ap_lo" min="40" max="200" placeholder="e.g., 80" required>
                    <span class="help">Bottom number in BP reading</span>
                </div>
                
                <div class="form-group">
                    <label>Cholesterol</label>
                    <input type="number" name="cholesterol" min="1" max="3" placeholder="1, 2, or 3" required>
                    <span class="help">1=Normal, 2=Above, 3=High</span>
                </div>
                
                <div class="form-group">
                    <label>Glucose</label>
                    <input type="number" name="gluc" min="1" max="3" placeholder="1, 2, or 3" required>
                    <span class="help">1=Normal, 2=Above, 3=High</span>
                </div>
                
                <div class="form-group">
                    <label>Smoking</label>
                    <input type="number" name="smoke" min="0" max="1" placeholder="0 or 1" required>
                    <span class="help">0 = No, 1 = Yes</span>
                </div>
                
                <div class="form-group">
                    <label>Alcohol</label>
                    <input type="number" name="alco" min="0" max="1" placeholder="0 or 1" required>
                    <span class="help">0 = No, 1 = Yes</span>
                </div>
                
                <div class="form-group">
                    <label>Physical Activity</label>
                    <input type="number" name="active" min="0" max="1" placeholder="0 or 1" required>
                    <span class="help">0 = No, 1 = Yes</span>
                </div>
                
                <div class="form-group">
                    <label>Pulse Pressure</label>
                    <input type="number" name="pulse_pressure" min="0" max="150" placeholder="Auto-calculated" required>
                    <span class="help">Systolic - Diastolic (auto)</span>
                </div>
                
                <div class="form-group">
                    <label>BMI</label>
                    <input type="number" name="BMI" min="10" max="60" step="0.1" placeholder="Auto-calculated" required>
                    <span class="help">Weight √∑ (Height/100)¬≤ (auto)</span>
                </div>
            </div>
            
            <button type="submit" class="btn-primary" style="width: 100%; margin-top: 30px;">üîÆ Get Prediction</button>
        </form>
        
        <div class="result" id="result"></div>
    </section>
    
    <!-- Graphs Section -->
    <section id="graphs" class="content-section hidden">
        <h2 class="section-title">üìä Performance Graphs</h2>
        <div style="text-align: center; margin-bottom: 30px;">
            <a href="/metrics" class="btn-primary" style="text-decoration: none;">View All Graphs on Full Page</a>
        </div>
        <div id="graphsContainer">
            <div style="text-align: center; padding: 40px; color: #666;">
                <p>Click the button above to view detailed performance graphs</p>
            </div>
        </div>
    </section>
    
    <!-- Model Details Section -->
    <section id="model" class="content-section hidden">
        <h2 class="section-title">ü§ñ Model Details</h2>
        <div class="model-details">
            <div class="detail-card">
                <h4>üß† Algorithm</h4>
                <p>Gradient Boosting Classifier</p>
            </div>
            <div class="detail-card">
                <h4>üìä Dataset</h4>
                <p>Cardiovascular Disease Dataset (68,607 records)</p>
            </div>
            <div class="detail-card">
                <h4>üìà Features</h4>
                <p>13 health-related features</p>
            </div>
            <div class="detail-card">
                <h4>üéØ Purpose</h4>
                <p>Binary classification for cardiovascular disease prediction</p>
            </div>
            <div class="detail-card">
                <h4>‚ú® Accuracy</h4>
                <p>~73% accuracy on test data</p>
            </div>
            <div class="detail-card">
                <h4>üí° Best For</h4>
                <p>Early risk assessment and health screening</p>
            </div>
        </div>
    </section>
    
    <!-- Disclaimer Section -->
    <section id="disclaimer" class="content-section hidden">
        <h2 class="section-title">‚ö†Ô∏è Important Disclaimer</h2>
        <div class="disclaimer-box">
            <h3>Medical Disclaimer</h3>
            <p>
                This tool is designed for informational and educational purposes only. It is NOT a substitute for professional medical advice, diagnosis, or treatment.
            </p>
            <p style="margin-top: 15px;">
                <strong>Always seek the advice of a qualified healthcare provider</strong> with any questions you may have regarding a medical condition. Never disregard professional medical advice or delay in seeking it because of something you have read or seen on this website.
            </p>
            <p style="margin-top: 15px;">
                The predictions generated by this AI model are based on statistical analysis and should be interpreted with caution. Individual results may vary, and the model does not account for all possible health factors.
            </p>
            <p style="margin-top: 15px;">
                This application should be used as a preliminary screening tool only and does not replace comprehensive medical evaluation by licensed healthcare professionals.
            </p>
        </div>
    </section>
    
    <script>
        // Section Navigation
        function showSection(sectionId, element) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Remove active class from all nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // Show selected section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.remove('hidden');
            }
            
            // Add active class to clicked nav link
            if (element) {
                element.classList.add('active');
            } else {
                // Find the nav link that corresponds to this section
                document.querySelectorAll('.nav-link').forEach(link => {
                    if (link.getAttribute('onclick') && link.getAttribute('onclick').includes(sectionId)) {
                        link.classList.add('active');
                    }
                });
            }
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // Prediction Form Handler
        document.getElementById('predictionForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const data = {};
            formData.forEach((value, key) => {
                data[key] = parseFloat(value);
            });
            
            const btn = e.target.querySelector('button');
            btn.textContent = '‚è≥ Processing...';
            btn.disabled = true;
            
            try {
                const response = await fetch('/api/predict', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (result.error) throw new Error(result.error);
                
                const resultDiv = document.getElementById('result');
                resultDiv.style.display = 'block';
                resultDiv.className = result.prediction === 1 ? 'result danger' : 'result success';
                
                const icon = result.prediction === 1 ? '‚ö†Ô∏è' : '‚úÖ';
                resultDiv.innerHTML = `
                    <h3>${icon} ${result.message}</h3>
                    <div style="margin-top: 15px;">
                        <div><strong>No Disease:</strong> ${(result.probability_no_disease * 100).toFixed(1)}%</div>
                        <div><strong>Has Disease:</strong> ${(result.probability_disease * 100).toFixed(1)}%</div>
                    </div>
                    <p style="margin-top: 15px; font-size: 0.9em; opacity: 0.8;">
                        üí° Please consult a healthcare professional for medical advice
                    </p>
                `;
                
                resultDiv.scrollIntoView({ behavior: 'smooth' });
            } catch (error) {
                const resultDiv = document.getElementById('result');
                resultDiv.style.display = 'block';
                resultDiv.className = 'result danger';
                resultDiv.innerHTML = `<h3>‚ùå Error</h3><p>${error.message}</p>`;
            } finally {
                btn.textContent = 'üîÆ Get Prediction';
                btn.disabled = false;
            }
        });
        
        // Auto-calculate BMI
        const heightInput = document.querySelector('input[name="height"]');
        const weightInput = document.querySelector('input[name="weight"]');
        const bmiInput = document.querySelector('input[name="BMI"]');
        
        function calculateBMI() {
            const height = parseFloat(heightInput.value) / 100;
            const weight = parseFloat(weightInput.value);
            if (height > 0 && weight > 0) {
                bmiInput.value = (weight / (height * height)).toFixed(1);
            }
        }
        
        heightInput.addEventListener('input', calculateBMI);
        weightInput.addEventListener('input', calculateBMI);
        
        // Auto-calculate pulse pressure
        const systolicInput = document.querySelector('input[name="ap_hi"]');
        const diastolicInput = document.querySelector('input[name="ap_lo"]');
        const pulseInput = document.querySelector('input[name="pulse_pressure"]');
        
        function calculatePulse() {
            const systolic = parseFloat(systolicInput.value);
            const diastolic = parseFloat(diastolicInput.value);
            if (systolic > 0 && diastolic > 0 && systolic > diastolic) {
                pulseInput.value = (systolic - diastolic);
            }
        }
        
        systolicInput.addEventListener('input', calculatePulse);
        diastolicInput.addEventListener('input', calculatePulse);
    </script>
</body>
</html>
